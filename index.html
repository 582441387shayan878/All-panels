<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ® Ú©Ù„Ú©Ø³ÛŒÙˆÙ† Ù¾Ù†Ù„â€ŒÙ‡Ø§</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Orbitron',sans-serif;
      background:linear-gradient(135deg,#0f0f23 0%,#1a1a2e 50%,#16213e 100%);
      color:#e0e0e0;min-height:100vh;padding:20px;text-align:center;direction:rtl;position:relative;overflow-x:hidden
    }
    body::before{
      content:'';position:absolute;top:0;left:0;width:100%;height:100%;
      background:radial-gradient(circle at 20% 80%, rgba(0,255,238,.1) 0%, transparent 50%),
                 radial-gradient(circle at 80% 20%, rgba(255,0,255,.1) 0%, transparent 50%);
      z-index:-1;
    }
    .container{max-width:1200px;margin:0 auto;padding:20px}
    header{margin-bottom:50px;position:relative}
    h1{
      font-size:3.5rem;font-weight:700;margin-bottom:15px;
      background:linear-gradient(90deg,#00ffcc,#0099ff,#cc00ff);
      -webkit-background-clip:text;background-clip:text;color:transparent;
      text-shadow:0 0 20px rgba(0,255,238,.5);animation:glow 2s infinite alternate
    }
    @keyframes glow{from{filter:drop-shadow(0 0 5px rgba(0,255,238,.7))}
    to{filter:drop-shadow(0 0 15px rgba(0,255,238,.9))}}
    .subtitle{font-size:1.5rem;color:#a0a0a0;margin-bottom:30px;font-weight:500}
    #panel-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:30px;margin-top:40px}
    .panel-card{
      background:rgba(30,30,50,.7);backdrop-filter:blur(10px);border-radius:20px;border:1px solid rgba(100,100,255,.2);
      padding:30px;box-shadow:0 10px 30px rgba(0,0,0,.3);transition:transform .3s,box-shadow .3s,border-color .3s;
      position:relative;overflow:hidden;display:flex;flex-direction:column;animation:fadeInUp .5s ease forwards;
    }
    .panel-card::before{content:'';position:absolute;top:0;left:0;width:100%;height:5px;background:linear-gradient(90deg,#00ffcc,#0099ff,#cc00ff);transform:translateX(-100%);transition:transform .5s}
    .panel-card:hover{transform:translateY(-10px);box-shadow:0 15px 40px rgba(0,100,255,.3);border-color:rgba(0,255,238,.5)}
    .panel-card:hover::before{transform:translateX(0)}
    .panel-card h3{color:#00ffcc;font-size:1.8rem;margin-bottom:15px;text-shadow:0 0 10px rgba(0,255,238,.5);position:relative;z-index:1}
    .panel-card p{font-size:1.1rem;color:#b0b0b0;line-height:1.6;flex-grow:1;margin-bottom:20px;position:relative;z-index:1}
    .panel-card a{display:inline-block;margin-top:auto;background:linear-gradient(90deg,#00ffcc,#0099ff);color:#0a0a1a;padding:12px 25px;border-radius:30px;font-weight:700;text-decoration:none;transition:all .3s;font-size:1rem;position:relative;z-index:1}
    .panel-card a:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,255,238,.4)}
    .panel-card a:active{transform:translateY(0)}
    .empty-state{grid-column:1 / -1;padding:60px 20px;text-align:center}
    .empty-state-icon{font-size:5rem;margin-bottom:20px;opacity:.5}
    .empty-state h3{font-size:1.8rem;color:#00ffcc;margin-bottom:15px}
    .empty-state p{font-size:1.2rem;color:#a0a0a0;max-width:600px;margin:0 auto 30px}
    .empty-state a{display:inline-block;background:linear-gradient(90deg,#00ffcc,#0099ff);color:#0a0a1a;padding:12px 25px;border-radius:30px;font-weight:700;text-decoration:none;transition:all .3s}
    .empty-state a:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,255,238,.4)}
    /* Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ (ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†) */
    .profile-icon{
      position:fixed;top:25px;left:25px;width:60px;height:60px;background:linear-gradient(45deg,#ff88dc,#00ffee,#88ffcc);
      border-radius:50%;cursor:pointer;box-shadow:0 0 20px rgba(0,255,238,.7);display:flex;align-items:center;justify-content:center;
      font-weight:bold;font-size:24px;color:#0a0a1a;z-index:999;transition:transform .3s,box-shadow .3s
    }
    .profile-icon:hover{transform:scale(1.1);box-shadow:0 0 30px rgba(0,255,238,.9)}
    .profile-icon:active{transform:scale(.95)}
    /* ÙØ±Ù… Ù„Ø§Ú¯ÛŒÙ† */
    #loginModal{
      position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(20,20,40,.9);
      backdrop-filter:blur(15px);padding:40px;border-radius:20px;border:1px solid rgba(0,255,238,.3);box-shadow:0 0 30px rgba(0,255,238,.5);
      display:none;z-index:1000;width:350px
    }
    #loginModal h2{color:#00ffcc;margin-bottom:25px;font-size:1.8rem;text-align:center}
    #loginModal input{
      width:100%;margin-bottom:15px;padding:15px;border-radius:10px;border:1px solid rgba(100,100,255,.3);
      background:rgba(30,30,50,.6);color:#e0e0e0;font-family:'Orbitron',sans-serif;font-size:1rem;transition:border-color .3s,box-shadow .3s
    }
    #loginModal input:focus{outline:none;border-color:#00ffcc;box-shadow:0 0 10px rgba(0,255,238,.3)}
    #loginModal button{
      width:100%;padding:15px;background:linear-gradient(90deg,#00ffcc,#0099ff);border:none;border-radius:10px;font-weight:700;cursor:pointer;color:#0a0a1a;
      font-family:'Orbitron',sans-serif;font-size:1rem;transition:all .3s
    }
    #loginModal button:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,255,238,.4)}
    #loginModal button:active{transform:translateY(0)}
    .close-modal{position:absolute;top:15px;right:15px;width:30px;height:30px;background:rgba(255,255,255,.1);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px;color:#e0e0e0;transition:background .3s}
    .close-modal:hover{background:rgba(255,255,255,.2)}
    footer{text-align:center;margin-top:60px;padding-top:30px;border-top:1px solid rgba(100,100,255,.2);color:#808080;font-size:.9rem}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
    .panel-card:nth-child(1){animation-delay:.1s}.panel-card:nth-child(2){animation-delay:.2s}
    .panel-card:nth-child(3){animation-delay:.3s}.panel-card:nth-child(4){animation-delay:.4s}
    .panel-card:nth-child(5){animation-delay:.5s}.panel-card:nth-child(6){animation-delay:.6s}
    @media (max-width:768px){
      h1{font-size:2.5rem}.subtitle{font-size:1.2rem}#panel-container{grid-template-columns:1fr;gap:20px}
      .profile-icon{width:50px;height:50px;font-size:20px}
      #loginModal{width:90%;max-width:350px;padding:30px 20px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ¯ Ú©Ù„Ú©Ø³ÛŒÙˆÙ† Ù¾Ù†Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ù†</h1>
      <p class="subtitle">shayan878@</p>
    </header>

    <div id="panel-container"></div>

    <footer><p>Â© 2023 Ú©Ù„Ú©Ø³ÛŒÙˆÙ† Ù¾Ù†Ù„â€ŒÙ‡Ø§ | Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ ØªÙˆØ³Ø· ØªÛŒÙ… ØªÙˆØ³Ø¹Ù‡</p></footer>
  </div>

  <!-- Ù¾Ø±ÙˆÙØ§ÛŒÙ„ / ÙˆØ±ÙˆØ¯ -->
  <div class="profile-icon" onclick="openLogin()">ğŸ‘¤</div>
  <div id="loginModal">
    <div class="close-modal" onclick="closeLogin()">âœ•</div>
    <h2>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
    <input type="text" id="username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ" />
    <input type="password" id="password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" />
    <button onclick="login()">ÙˆØ±ÙˆØ¯</button>
  </div>

  <script>
    // --- Ú©Ù…Ú©â€ŒÚ©Ø§Ø±: Ú¯Ø±ÙØªÙ† Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ URL
    function getQueryParam(name) {
      const params = new URLSearchParams(location.search);
      return params.get(name);
    }

    // --- Ø±Ù†Ø¯Ø± Ù„ÛŒØ³Øª Ù¾Ù†Ù„â€ŒÙ‡Ø§
    function renderPanels(list) {
      const container = document.getElementById("panel-container");
      container.innerHTML = "";
      if (!list || !list.length) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ“­</div>
            <h3>Ù‡ÛŒÚ† Ù¾Ù†Ù„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
            <p>Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ù¾Ù†Ù„ Ø¬Ø¯ÛŒØ¯ØŒ Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒØ¯.</p>
            <a href="#" onclick="openLogin(); return false;">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</a>
          </div>`;
        return;
      }
      list.forEach(p => {
        const card = document.createElement("div");
        card.className = "panel-card";
        card.innerHTML = `
          <h3>${p.title}</h3>
          <p>${p.description || ''}</p>
          <a href="${p.file}" target="_blank" rel="noopener">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„</a>`;
        container.appendChild(card);
      });
    }

    // --- Ø®ÙˆØ§Ù†Ø¯Ù† Ø§Ø² Gist Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯
    async function loadFromGistOrLocal() {
      const gistId = getQueryParam('gist') || (JSON.parse(localStorage.getItem('ghSettings')||'{}')).gistId;
      const fileName = getQueryParam('file') || (JSON.parse(localStorage.getItem('ghSettings')||'{}')).gistFile || 'panels.json';

      if (gistId) {
        try {
          const res = await fetch(`https://api.github.com/gists/${gistId}`);
          if (!res.ok) throw new Error('Gist not found');
          const data = await res.json();
          const file = data.files && data.files[fileName];
          if (!file) throw new Error(`ÙØ§ÛŒÙ„ ${fileName} Ø¯Ø± Gist Ù†ÛŒØ³Øª`);
          const panels = JSON.parse(file.content || '[]');
          renderPanels(panels);
          // Ú©Ø´ Ù…Ø­Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø¨Ø¹Ø¯ÛŒ
          localStorage.setItem('panels', JSON.stringify(panels));
          return;
        } catch (e) {
          console.warn('Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù† Gist:', e.message);
        }
      }

      // fallback: Ø§Ø² Ù„ÙˆÚ©Ø§Ù„â€ŒØ§Ø³ØªÙˆØ±ÛŒØ¬ (Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ø¨Ø§ Ø§Ø¯Ù…ÛŒÙ†)
      const localPanels = JSON.parse(localStorage.getItem('panels') || '[]') || JSON.parse(localStorage.getItem('myPanels') || '[]');
      renderPanels(localPanels);
    }

    // --- ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø§Ø¯Ù…ÛŒÙ† (Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù…Ø«Ù„ Ù†Ø³Ø®Ù‡Ù” Ù‚Ø¨Ù„ÛŒ ØªÙˆ)
    const defaultUser = "582441387shayan878";
    const defaultPass = "sh878";
    function getSavedCredentials() {
      const saved = JSON.parse(localStorage.getItem("adminCredentials"));
      if (saved && saved.username && saved.password) return saved;
      return { username: defaultUser, password: defaultPass };
    }
    function openLogin(){ document.getElementById("loginModal").style.display="block"; }
    function closeLogin(){
      document.getElementById("loginModal").style.display="none";
      document.getElementById("username").value=""; document.getElementById("password").value="";
    }
    function login(){
      const u=document.getElementById("username").value.trim();
      const p=document.getElementById("password").value;
      const creds=getSavedCredentials();
      if(u===creds.username && p===creds.password){ window.location.href="admin.html"; }
      else{
        const f=document.getElementById("password");
        f.style.borderColor="#ff4b2b"; f.placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª"; f.value="";
        setTimeout(()=>{ f.style.borderColor="rgba(100, 100, 255, 0.3)"; f.placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±"; },3000);
      }
    }
    window.onclick=function(e){ const m=document.getElementById("loginModal"); if(e.target===m){ closeLogin(); } }

    // --- Ø´Ø±ÙˆØ¹
    loadFromGistOrLocal();
  </script>
</body>
</html>
